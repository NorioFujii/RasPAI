<!--
//------------------------------------------------
//  Test bench for ChatGPT stream mode
//  Copyright (c) 2023 N.Fujii All rights reserved.
// -----------------------------------------------
// ('QmVhcmVyIHNrLUVLQWNmN04zOUU2TXdkeDFKbVljVDNCbGJrRkpvTENMaDV2eWFWUjNrYzVhM0dZUA==')
-->
<html>
<head>
<meta http-equiv="MSThemeCompatible" CONTENT="yes" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<title>CallGPT Bench対応版</title>
<style>
.searchText_ltr3
{
	position:absolute;
	top:104px;left:80px;
        font-size:18px;
}
.searchText_opt3
{
	position:absolute;
	top:144px;left:40px;
        font-size:18px;
}
.search_icn3
{
	background-color:rgb(224,224,224);
	position:absolute;
	top:106px;left:45px;
}
.fin3
{
    width:36px; 
    height:30px; 
    margin-right: 0px;
    margin-left: 4px;
    padding-right: 2px;
    padding-left: 2px;
    font-size:16px;
    font-weight:bold;
    color:red;
}
</style>
<script type=text/Javascript>
var fStop,GPTwin, OPENAI_API_KEY;
function initSettings() {
        GPTwin = window.open( "", "samep", "width=700,height=400,scrollbars=yes,resizable=yes" ); // iframeウィンドウ化
        GPTwin.document.documentElement.innerHTML =
           "<head><title>テスト</title></head>\n<body><div id='ans1'></div><div id='ans2'></div></body>";
        obj = GPTwin;
}
async function mouseon() {
  if ((!fStop)&& (document.getElementById('sentence').value=="")) {
    let paste = (await navigator.clipboard.readText()
      .then((text) => {
        console.log(text);
        return (text);
      })
      .catch(err => {
        return ("");
      }));
    document.getElementById('sentence').value = paste; 
  }
  freeze(200);
}
function freeze(t) {
	fStop=true; setTimeout('fStop=false;',t);
}
window.document.onkeydown = nextForm;
function nextForm(e) {
	if (!e) var e = window.event;
	if (e.keyCode == 13){
		chatTxt();
		return false;
	}
}
function rubyclose() {  // 話題消滅
	document.getElementById('sentence').value = "";
	if (obj) obj.document.getElementById('ans1').innerHTML = "";
        ousyuu = [];
}


</script>
<script src="GPTfetch.js" type="text/javascript" language="javascript"></script>
</head>
<body onload="initSettings();" background="images/kabe.gif">
<div style="line-height:5px"><br></div>
<h2>　　Call GPT Test bench</h2>
 <table width="160" height="100" border=0 cellpadding=0 cellspacing=0>
     <tr><td><span id="searchText">
        	<input type="text" class="searchText_ltr3" id="sentence" maxlength="128" size=68
			 onmouseover="" ondblclick="mouseon();this.focus();"
			 onmouseout="this.focus();" placeholder="ここに問い合わせを！" /></span>
	 </td>
         <td><img id="searchImage" height="24px" unselectable=on onclick="chatTxt();"
			src="images/ltr-stocks_search.png" class="search_icn3" />
	 </td>
     </tr><tr>
          <td class="searchText_opt3"><input type="checkbox" id="Stream" checked />:Streamモードで表示　<input type="checkbox" id="Conver" />:会話モード（課金👇）　<input type="button" value="Ｘ" class="fin3" onclick="rubyclose();" />:話題忘却<br>　　　　　　　　　　　　　　　<a href="https://auto-worker.com/blog/?p=6988#toc_id_5" target="_BLANK">Your API Key</a>：<input type="password" autocomplete="new-password" id="account" size=40 />
          </td>
     </tr>
 </table><br>
 <table cellpadding="0" cellspacing="0">
    <tr><td>　　</td><td>
        <iframe id="WPifrm2" name="samep" scrolling="yes" frameborder=1 style="resize: both; width:700px; height:200px;" src="" ></iframe>
    </td></tr>
 </table>

</body>
</html>
